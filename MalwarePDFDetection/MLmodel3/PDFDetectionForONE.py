
# -*- coding: utf-8 -*-
import sys,os
BASE_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__))) # __file__获取执行文件相对路径，整行为取上一级的上一级目录
sys.path.append(BASE_DIR)

import pandas as pd
import pickle
import numpy
import multiprocessing

# from ML3 import data_clear
from mimicus.mimicus.tools import featureedit

def get_features(pdf_name):
    
    pdf = featureedit.FeatureEdit(pdf_name)
    
    feats = pdf.retrieve_feature_dictionary()

    if feats['size'] == 0 or isinstance(feats['size'], Exception):
        return None
    print(feats)    
    return pdf_name, pdf.retrieve_feature_vector_numpy()




if __name__ == '__main__':
    file = "./testfile/test001.pdf"
    features = get_features(file)
    print(features)

    # 读取模型
    with open('model_csv2.3.pickle', 'rb') as f:
        model = pickle.load(f)
    model.predict(features)
